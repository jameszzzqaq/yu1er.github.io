<!doctype html><html lang=en dir=auto>
<head><meta charset=utf-8>
<meta http-equiv=x-ua-compatible content="IE=edge">
<meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no">
<meta name=robots content="index, follow">
<title>yuler's blog</title>
<meta name=keywords content="Blog,Portfolio,PaperMod,Yuler">
<meta name=description content="yuler's blog">
<meta name=author content="yuler">
<link rel=canonical href=https://zhangyh.me/>
<meta name=google-site-verification content="G-JP3WQ36T5K">
<meta name=yandex-verification content="XYZabc">
<meta name=msvalidate.01 content="XYZabcsadf">
<link crossorigin=anonymous href=/assets/css/stylesheet.min.css rel="preload stylesheet" as=style>
<link rel=icon href=https://zhangyh.me/icon/jiaran16.ico>
<link rel=icon type=image/png sizes=16x16 href=https://zhangyh.me/icon/jiaran16.ico>
<link rel=icon type=image/png sizes=32x32 href=https://zhangyh.me/icon/jiaran32.ico>
<link rel=apple-touch-icon href=https://zhangyh.me/%3Clink%20/%20abs%20url%3E>
<link rel=mask-icon href=https://zhangyh.me/%3Clink%20/%20abs%20url%3E>
<meta name=theme-color content="#2e2e33">
<meta name=msapplication-TileColor content="#2e2e33">
<meta name=generator content="Hugo 0.88.1">
<link rel=alternate type=application/rss+xml href=https://zhangyh.me/index.xml>
<link rel=alternate type=application/json href=https://zhangyh.me/index.json>
<noscript>
<style>#theme-toggle,.top-link{display:none}</style>
<style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style>
</noscript>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-JP3WQ36T5K"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag('js',new Date),gtag('config','G-JP3WQ36T5K',{anonymize_ip:!1})}</script>
<meta property="og:title" content="yuler's blog">
<meta property="og:description" content="yuler's blog">
<meta property="og:type" content="website">
<meta property="og:url" content="https://zhangyh.me/"><meta property="og:image" content="https://zhangyh.me/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta property="og:site_name" content="yuler's blog">
<meta name=twitter:card content="summary_large_image">
<meta name=twitter:image content="https://zhangyh.me/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E">
<meta name=twitter:title content="yuler's blog">
<meta name=twitter:description content="yuler's blog">
<script type=application/ld+json>{"@context":"https://schema.org","@type":"Organization","name":"yuler's blog","url":"https://zhangyh.me/","description":"yuler\u0026#39;s blog","thumbnailUrl":"https://zhangyh.me/icon/jiaran16.ico","sameAs":["mailto:zyh.me@outlook.com","https://github.com/yu1er"]}</script>
</head>
<body class=list id=top>
<script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add('dark'):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove('dark'):window.matchMedia('(prefers-color-scheme: dark)').matches&&document.body.classList.add('dark')</script>
<header class=header>
<nav class=nav>
<div class=logo>
<a href=https://zhangyh.me/ accesskey=h title="Home (Alt + H)">Home</a>
<span class=logo-switches>
<button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg>
</button>
</span>
</div>
<ul id=menu>
<li>
<a href=https://zhangyh.me/archives/ title=archives>
<span>archives</span>
</a>
</li>
<li>
<a href=https://zhangyh.me/categories/ title=categories>
<span>categories</span>
</a>
</li>
<li>
<a href=https://zhangyh.me/tags/ title=tags>
<span>tags</span>
</a>
</li>
<li>
<a href=https://zhangyh.me/search/ title="search (Alt + /)" accesskey=/>
<span>search</span>
</a>
</li>
</ul>
</nav>
</header>
<main class=main>
<article class="first-entry home-info">
<header class=entry-header>
<h1>Hi there ğŸŒˆ</h1>
</header>
<section class=entry-content>
<p></p>
</section>
<footer class=entry-footer>
<div class=social-icons>
<a href=mailto:zyh.me@outlook.com target=_blank rel="noopener noreferrer me" title=Email><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 21" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 4h16c1.1.0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1.0-2-.9-2-2V6c0-1.1.9-2 2-2z"/><polyline points="22,6 12,13 2,6"/></svg>
</a>
<a href=https://github.com/yu1er target=_blank rel="noopener noreferrer me" title=Github><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77 5.44 5.44.0 003.5 8.55c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg>
</a>
</div>
</footer>
</article>
<article class=post-entry>
<header class=entry-header>
<h2>cppé—®é¢˜æ¸…å•
</h2>
</header>
<section class=entry-content>
<p>é—®é¢˜1 #include &lt;iostream> class A { public: virtual void func(int val = 1) {std::cout &lt;&lt; "A->" &lt;&lt; val &lt;&lt; std::endl; } virtual void test(){func();} }; class B : public A { public: void func(int val = 0) {std::cout &lt;&lt; "B->" &lt;&lt; val &lt;&lt; std::endl;} }; int main () { B* b = new B; b->test(); return 0; } è¾“å‡º B->1
è§£é‡Š å‚è€ƒã€ŠEffective c++ã€‹æ¡æ¬¾37: ç»ä¸é‡æ–°å®šä¹‰ç»§æ‰¿è€Œæ¥çš„ç¼ºçœé»˜è®¤å€¼. å› ä¸ºè™šå‡½æ•°æ˜¯åŠ¨æ€ç»‘å®š,å› æ­¤bå®é™…æŒ‡å‘çš„å°±æ˜¯b.è€Œé»˜è®¤å‚æ•°æ˜¯é™æ€ç»‘å®š,æ˜¯ç”±ç¼–è¯‘å™¨å†³å®šçš„.
testå‡½æ•°æ˜¯Açš„,testå†…éƒ¨è°ƒç”¨funcå®é™…ä¸Šæ˜¯this->func,funcæ˜¯ä¸ªè™šå‡½æ•°è€Œä¸”åœ¨Bä¸­è¢«é‡å†™äº†,æ‰€ä»¥æœ‰åŠ¨æ€ç»‘å®š. è¿™é‡Œçš„thisè¿è¡Œæ—¶ç±»å‹æ˜¯B,æ‰€ä»¥è°ƒç”¨Bçš„func,ä½†æ˜¯ç¼ºçœå‚æ•°å®é™…ä¸Šæ˜¯é™æ€ç»‘å®šçš„,æ‰€ä»¥è¾“å‡ºçš„valæ˜¯Aä¸­çš„é‚£ä¸ªval....</p>
</section>
<footer class=entry-footer>10-10&nbsp;Â·&nbsp;yuler</footer>
<a class=entry-link aria-label="post link to cppé—®é¢˜æ¸…å•" href=https://zhangyh.me/posts/cpp/problem_list/></a>
</article>
<article class=post-entry>
<header class=entry-header>
<h2>priority_queueè‡ªå®šä¹‰æ’åº
</h2>
</header>
<section class=entry-content>
<p>ç»™å®šä¸€ä¸ªpair&lt;int, int>æ•°ç»„,é€šè¿‡è‡ªå®šä¹‰æ’åºé¡ºåºå†³å®šä¼˜å…ˆé˜Ÿåˆ—ä¸­çš„é¡ºåº.
vector&lt;pair&lt;int, int>> nums{{4, 1}, {8, 2}, {1, 9}, {8, 1}, {8, 4}, {3, 7}}; ä»¿å‡½æ•° (æ¨è) ä»¿å‡½æ•°çš„å‡ºç°å°±æ˜¯ä¸ºäº†è§£å†³å‡½æ•°æŒ‡é’ˆåœ¨ä½œä¸ºå‡½æ•°å‚æ•°å‘å‡½æ•°ä¼ é€’æ—¶çš„å±€é™æ€§é—®é¢˜. é€šè¿‡é‡å†™ç±»çš„operator(),ä½¿è¯¥ç±»å…·æœ‰å‡½æ•°çš„åŠŸèƒ½.
struct cmp { bool operator() (const pair&lt;int, int> &a, const pair&lt;int, int> &b) { return a.first == b.first? a.second &lt; b.second : a.first &lt; b.first; } }; priority_queue&lt;pair&lt;int, int>, vector&lt;pair&lt;int, int>>, cmp> pq; lambda é€šè¿‡c++11æ–°ç‰¹æ€§çš„lambdaå’Œdelctype,å¯ä»¥é¿å…é‡æ–°å®šä¹‰ç±». ä½†éœ€è¦æ³¨æ„,lambdaå‡½æ•°éœ€è¦é€šè¿‡æ„é€ å‡½æ•°çš„å‚æ•°ä¼ é€’.
auto a = [](const pair&lt;int, int> & a, const pair&lt;int, int> &b){ return a.first == b....</p>
</section>
<footer class=entry-footer>10-7&nbsp;Â·&nbsp;yuler</footer>
<a class=entry-link aria-label="post link to priority_queueè‡ªå®šä¹‰æ’åº" href=https://zhangyh.me/posts/cpp/priority_queue_custom_comparator/></a>
</article>
<article class=post-entry>
<header class=entry-header>
<h2>SFM: Mitigating Read/Write Amplification Problem of LSM-Tree-Based Key-Value Stores
</h2>
</header>
<section class=entry-content>
<p>Movitation ä¼ ç»Ÿçš„merge policy Level Merge Policyå’ŒTiered Merge Policyåœ¨è¯»å†™æ”¾å¤§æ–¹é¢å„æœ‰ä¼˜åŠ¿. å‰è€…ç›¸å½“äºå•å±‚çš„Tiered,ä¿è¯äº†å•å±‚æ•°æ®çš„æœ‰åºæ€§,å‡å°‘äº†è¯»æ”¾å¤§,ä½†è¦ç»´æŠ¤è¿™ç§æœ‰åºæ€§,å°±éœ€è¦é¢‘ç¹çš„merge,å› æ­¤é€ æˆäº†ä¸¥é‡çš„å†™æ”¾å¤§. åè€…å¯¹æœ‰åºæ€§çš„è¦æ±‚å¹¶ä¸ä¸¥æ ¼,å®ƒåªè¦æ±‚æ¯ä¸ªgroupçš„key rangeäº’ä¸äº¤å‰,å…è®¸sstableä¹‹é—´çš„keyäº¤å‰.
å·¥ä½œè´Ÿè½½çš„ç©ºé—´å±€éƒ¨æ€§ ä½œè€…å¯¹ZippyDB(facebook)çš„å·¥ä½œè´Ÿè½½åˆ†æå‘ç°,å°‘éƒ¨åˆ†çš„keyè¢«è¯»å†™å¤šæ¬¡,å¤§éƒ¨åˆ†çš„keyè¢«è¯»å†™çš„æ¬¡æ•°å¾ˆå°‘.
Design ä½œè€…æå‡ºäº†ç–‘é—®:
How to resolve the read amplification problem induced by the tiering merge policy while maintaining its low write amplification?
æ ¹æ®key-spaceçš„ä¸åŒaccess pattern,æœ‰é€‰æ‹©çš„é‡‡ç”¨Tieringå’ŒLeveling Merge policy. é€šè¿‡è¿½è¸ªæ¯å±‚ä¸­çš„key-spaceçš„è®¿é—®å¼ºåº¦,æ¥å†³å®šè®¾ç½®Tçš„å€¼ä¸º1è¿˜æ˜¯configured threshold.
Spatially Fragmented LSM-TREE (SFM) æ¯å±‚é€šè¿‡éšæœºçš„è¾¹ç•Œåˆ†ä¸ºä¸åŒçš„key-space.è¾¹ç•Œçš„é€‰å–æ–¹å¼ç±»ä¼¼äºPebblesDB. å¦‚æœä¸€ä¸ªæ ˆçš„key-rangeè¢«è®¤ä¸ºæ˜¯è¯»å¯†é›†çš„,åˆ™è®¾ç½®Tä¸º1,å¦åˆ™,æŒ‰ç…§åŸæœ‰çš„é…ç½®è®¾ç½®.
åˆå¹¶ç­–ç•¥å¦‚ä¸Šå›¾
è¯»è¶…è¿‡stacké˜ˆå€¼çš„æ–‡ä»¶åˆ°å†…å­˜ åœ¨å†…å­˜ä¸­è¿›è¡Œmerge æŒ‰ç…§ä¸‹å±‚çš„keyè¾¹ç•Œè¿›è¡Œåˆ‡ç‰‡ æ–°SSTableè¢«åˆ·æ–°åˆ°ä¸‹å±‚ æ·»åŠ åˆ°keyå¯¹åº”çš„æ ˆ B. Read Intensity Identification å¦‚ä½•åˆ¤æ–­è¯»çš„å¼ºåº¦å‘¢? ç»Ÿè®¡æ¯ä¸ªæ®µçš„è¯»å†™æ¬¡æ•°.å¯¹äºè¯»æ“ä½œ,å³ä½¿è¯»å–çš„keyä¸å­˜åœ¨,ä¹Ÿæ˜¯è¦è®¡å…¥è¯»å–æ¬¡æ•°çš„. å¯¹äºå†™æ“ä½œ,ç»Ÿè®¡æ¯æ¬¡mergeåçš„sstableä¸­çš„kvå¯¹çš„æ•°é‡. é€šè¿‡å¯¹æ¯”æ¯ä¸ªstackçš„r/wå’Œæ•´ä½“å¹³å‡çš„r/wæ¥åˆ¤æ–­å…¶ä¸ºhotè¿˜æ˜¯cold. æ ¹æ®æ¯ä¸ªstackçš„hotè¿˜æ˜¯coldå±æ€§,æ¥å†³å®škey-spaceçš„è®¿é—®å¼ºåº¦.
Metadata Managment é€šè¿‡StackMetadataçš„æ•°æ®ç»“æ„æ¥ç®¡ç†æ¯ä¸ªstackçš„å…ƒä¿¡æ¯....</p>
</section>
<footer class=entry-footer>9-24&nbsp;Â·&nbsp;yuler</footer>
<a class=entry-link aria-label="post link to SFM: Mitigating Read/Write Amplification Problem of LSM-Tree-Based Key-Value Stores" href=https://zhangyh.me/posts/paper/sep/sfm/></a>
</article>
<article class=post-entry>
<header class=entry-header>
<h2>weekly-contest-259
</h2>
</header>
<section class=entry-content>
<p>ç¬¬259æ¬¡å‘¨èµ› A. æ‰§è¡Œæ“ä½œåçš„å˜é‡å€¼ æ—¶é—´å¤æ‚åº¦: $O(n)$ ç©ºé—´å¤æ‚åº¦: $O(1)$ class Solution { public: int finalValueAfterOperations(vector&lt;string>& operations) { int X = 0; for (auto & s: operations) { if (s[1] == '+') X++; else X--; } return X; } }; B. æ•°ç»„ç¾ä¸½å€¼æ±‚å’Œ é€šè¿‡æ­£åä¸¤æ¬¡éå†è®°å½•æ¯ä¸ªå€¼å·¦è¾¹çš„æœ€å¤§å€¼å’Œå³è¾¹çš„æœ€å°å€¼.
æ—¶é—´å¤æ‚åº¦: $O(n)$ ç©ºé—´å¤æ‚åº¦: $O(n)$ class Solution { public: int sumOfBeauties(vector&lt;int>& nums) { int n = nums.size(); vector&lt;int> left(n, INT_MIN), right(n, INT_MAX); int ans = 0; left[0] = nums[0]; right[n - 1] = nums[n - 1]; for (int i = 1; i &lt; n; i++) left[i] = max(left[i-1], nums[i]); for (int i = n - 2; i >= 0; i--) right[i] = min(right[i + 1], nums[i]); for (int i = 1; i &lt; n - 1; i++) { if (left[i - 1] &lt; nums[i] && nums[i] &lt; right[i + 1]) ans +=2; else if (nums[i - 1] &lt; nums[i] && nums[i] &lt; nums[i + 1]) ans++; } return ans; } }; C....</p>
</section>
<footer class=entry-footer>9-20&nbsp;Â·&nbsp;yuler</footer>
<a class=entry-link aria-label="post link to weekly-contest-259" href=https://zhangyh.me/posts/leetcode/weekly-contest-259/></a>
</article>
<article class=post-entry>
<header class=entry-header>
<h2>biweekly-contest-61
</h2>
</header>
<section class=entry-content>
<p>ç¬¬61æ¬¡åŒå‘¨èµ› A: å·®çš„ç»å¯¹å€¼ä¸º K çš„æ•°å¯¹æ•°ç›® æ—¶é—´å¤æ‚åº¦:$O(n)$ ç©ºé—´å¤æ‚åº¦:$O(n)$ class Solution { public: int countKDifference(vector&lt;int>& nums, int k) { map&lt;int, int> m; int ans; for (auto && x : nums) { ans += (m[x + k] + m[x - k]); m[x]++; } return ans; } }; B: ä»åŒå€æ•°ç»„ä¸­è¿˜åŸåŸæ•°ç»„ ä¸¤ä¸ªå…³é”®ç‚¹: 1. å…ƒç´ ä¸ªæ•°ä¸€å®šä¸ºå¶æ•° 2. ç»“æœæ•°ç»„å…ƒç´ ä¸ªæ•°ä¸€å®šæ˜¯åŸæ•°ç»„äºŒåˆ†ä¹‹ä¸€
æ—¶é—´å¤æ‚åº¦: æ’åº: $O(nlgn)$ éå†: $O(n)$ ç©ºé—´å¤æ‚åº¦: $O(n)$ class Solution { public: vector&lt;int> findOriginalArray(vector&lt;int>& changed) { auto n = changed....</p>
</section>
<footer class=entry-footer>9-19&nbsp;Â·&nbsp;yuler</footer>
<a class=entry-link aria-label="post link to biweekly-contest-61" href=https://zhangyh.me/posts/leetcode/biweekly-contest-61/></a>
</article>
<article class=post-entry>
<header class=entry-header>
<h2>The Google File System
</h2>
</header>
<section class=entry-content>
<p>1 Introduction æœ¬æ–‡æ˜¯ã€ŠThe Google File Systemã€‹çš„å­¦ä¹ ç¬”è®°
2 Design Overview 2.1 Assumptions GFSåŸºäºä»¥ä¸‹åŸºæœ¬å‡è®¾ä½œä¸ºè®¾è®¡åŸåˆ™ã€‚
å»‰ä»·å•†ç”¨æœºå™¨å‡ºæ•…éšœæ˜¯å¸¸æ€ ä¸»è¦å­˜å‚¨å¤§æ–‡ä»¶ï¼Œé€šå¸¸å¤§äº100MBï¼Œæ²¡æœ‰é’ˆå¯¹å°æ–‡ä»¶çš„ä¼˜åŒ– è¯»æ“ä½œï¼šå¤§è§„æ¨¡çš„æµå¼è¯»ã€å°è§„æ¨¡çš„éšæœºè¯» å†™æ“ä½œï¼šå¤§è§„æ¨¡çš„appendå†™æ“ä½œã€å°è§„æ¨¡çš„éšæœºå†™æ•ˆç‡ä½ æ”¯æŒå¤šä¸ªå®¢æˆ·ç«¯å¹¶è¡Œ append åˆ°åŒä¸€ä¸ªæ–‡ä»¶ æŒç»­çš„é«˜å¸¦å®½æ¯”ä½æ—¶å»¶é‡è¦ 2.2 Interface æœªå®ç°POSIX API æ”¯æŒå¸¸è§æ–‡ä»¶æ“ä½œï¼ŒåŒ…æ‹¬create, delete, open, close, read, write. åŒ…æ‹¬ snapshot å’Œ record append 2.3 Architecture é›†ç¾¤é€šå¸¸åŒ…æ‹¬ä¸€ä¸ª masterã€å¤šä¸ª chunkserver å’Œå¤šä¸ªè®¿é—®çš„ client æ–‡ä»¶ä½¿ç”¨å›ºå®šå¤§å°(64 MB)çš„ chunk å­˜å‚¨ï¼Œä½¿ç”¨globally uniqueã€immutableçš„ 64bit chunk handleè¡¨ç¤º master ç»´æŠ¤æ•´ä¸ªé›†ç¾¤æ‰€æœ‰çš„ metadata ï¼Œé€šè¿‡ heartbeat ä¸ chunkserve è¿›è¡Œ instructã€state-collect client ä»¥ lib çš„å½¢å¼åµŒå…¥åˆ°åº”ç”¨ä¸­ï¼Œä»¥ä¾› application è°ƒç”¨ client å’Œ chunkserver éƒ½ä¸ cache file dataï¼Œä½† client ä¼š cache metadata 2....</p>
</section>
<footer class=entry-footer>8-28&nbsp;Â·&nbsp;yuler</footer>
<a class=entry-link aria-label="post link to The Google File System" href=https://zhangyh.me/posts/paper/aug/gfs/></a>
</article>
<article class=post-entry>
<header class=entry-header>
<h2>èŠèŠå†…å­˜å¯¹é½
</h2>
</header>
<section class=entry-content>
<p>ä¸ºä»€ä¹ˆéœ€è¦å†…å­˜å¯¹é½ï¼Ÿ é¦–å…ˆéœ€è¦ä»ç‰©ç†ç¡¬ä»¶ä¸Šäº†è§£è®¡ç®—æœºå¦‚ä½•è¿›è¡Œå†…å­˜è®¿é—®çš„ã€‚
Channel > DIMM > Rank > Chip > Bank > Coloum/Row > Cell
å¦‚ä¸Šå›¾ CPUåŒ…æ‹¬ä¸¤ä¸ªChannel æ¯ä¸ªChannelåŒ…æ‹¬ä¸¤ä¸ªDIMM æ¯ä¸ªDIMMç”±Rankç»„æˆ Rankç”±8ä¸ªå†…å­˜é¢—ç²’chipç»„æˆ æ¯ä¸ªChipåŒ…æ‹¬8ä¸ªBank
CPUè¯»å–å†…å­˜æ—¶ä»8ä¸ªchipä¸­æ¯ä¸ªè¯»å–8bitå­—èŠ‚ï¼Œä»è€Œæ„æˆ64bit columnå’Œrowå®šä½çš„ä¸€ä¸ªå•å…ƒæ ¼cellä¸­æœ‰8ä¸ªbit
å› æ­¤ä¸€æ¬¡æ€§æœ€å°‘è¯»å–64bitï¼Œè¿™æ°å¥½ä¹Ÿæ˜¯cachelineçš„å¤§å°ã€‚ ï¼ˆcachelineæ˜¯cacheçš„åŸºæœ¬å•ä½ï¼Œæ¯ä¸ªcacheç”±è‹¥å¹²cachelineç»„æˆï¼‰
ä»€ä¹ˆæ˜¯å†…å­˜å¯¹é½ ä»ä¸Šé¢æˆ‘ä»¬å¯ä»¥çŸ¥é“ï¼Œä¸€æ¬¡æ€§æœ€å°‘è¯»å–8Bï¼Œè¿™ä¹Ÿæ˜¯å±€éƒ¨æ€§åŸç†çš„ä¸€ç§ä½¿ç”¨ã€‚
å†…å­˜å¯¹é½å°±æ˜¯ä»£ç ç¼–è¯‘ååœ¨å†…å­˜ä¸­çš„å¸ƒå±€ï¼Œå½“ä¸€ä¸ªå†…å­˜åœ°å€åˆšå¥½èƒ½å¤Ÿæ•´é™¤8ï¼Œå°±ç§°ä¸ºå…¶å†…å­˜åœ°å€æ˜¯8å­—èŠ‚å¯¹é½çš„ã€‚
ä¸ºä»€ä¹ˆéœ€è¦å†…å­˜å¯¹é½ å¯¹äºgoä¸­å®šä¹‰çš„å¦‚ä¸‹ç»“æ„
type Type1 struct { a int8 b int64 c int32 } å…¶å†…å­˜å¸ƒå±€æ˜¯è¿™æ ·çš„ï¼š é€šè¿‡unsafe.Sizeof()å¯ä»¥æ‰“å°å‡ºè¯¥ç»“æ„å ç”¨äº†24å­—èŠ‚çš„å†…å­˜ã€‚
å¦‚æœè°ƒæ•´ä¸€ä¸‹é¡ºåºï¼š
type Type2 struct { a int8 c int32 b int64 } ä¾¿å¯ä»¥èŠ‚çº¦ä¸€ä¸ªå­—èŠ‚çš„å†…å­˜
é›¶å¤§å°å­—æ®µ å¦‚æœç»“æ„ä½“æˆ–æ•°ç»„ç±»å‹ä¸åŒ…å«å¤§å°å¤§äºé›¶çš„å­—æ®µæˆ–å…ƒç´ ï¼Œé‚£ä¹ˆå®ƒçš„å¤§å°å°±ä¸º0
package main import ( "fmt" "unsafe" ) type M struct { m int64 x struct{} } type N struct { x struct{} n int64 } func main() { m, n := M{}, N{} fmt....</p>
</section>
<footer class=entry-footer>8-13&nbsp;Â·&nbsp;yuler</footer>
<a class=entry-link aria-label="post link to èŠèŠå†…å­˜å¯¹é½" href=https://zhangyh.me/posts/misc/%E5%86%85%E5%AD%98%E5%AF%B9%E9%BD%90/></a>
</article>
<article class=post-entry>
<header class=entry-header>
<h2>LSM-based storage techniques: a survey
</h2>
</header>
<section class=entry-content>
<p> paperåŸæ–‡ï¼šLSM-based storage techniques: a survey
LSM-tree basics å¯¹äºç´¢å¼•ç»“æ„é€šå¸¸æœ‰ä¸¤ç§æ›´æ–°ç­–ç•¥ï¼Œå³in-place updateå’Œout-of-place updateã€‚
in-placeé€šå¸¸ä½¿ç”¨B+æ ‘ä½œä¸ºåº•å±‚æ•°æ®ç»“æ„ï¼Œé€šè¿‡éšæœºå†™æ¥æ›´æ–°æ•°æ®é¡¹ï¼Œå¸¦æ¥çš„æ˜¯è¯»æ•°æ®çš„ä¼˜åŒ–ï¼ŒåŒæ—¶æ¯ä¸ªæ•°æ®é¡¹åªå­˜æœ‰ä¸€ä»½ï¼Œå› æ­¤èŠ‚çº¦äº†ç©ºé—´ã€‚
out-placeé€šå¸¸ä½¿ç”¨lsm treeä½œä¸ºåº•å±‚æ•°æ®ç»“æ„ï¼Œå°†éšæœºå†™è½¬åŒ–ä¸ºé¡ºåºå†™ï¼ŒåŠ å¿«äº†å†™çš„é€Ÿåº¦ï¼Œä½†åŒæ—¶é™ä½äº†è¯»æ•°æ®çš„æ€§èƒ½ï¼Œå¦å¤–ï¼Œå¯¹åŒä¸€ä¸ªkeyï¼Œå­˜æœ‰å¤šä¸ªç‰ˆæœ¬ï¼Œå¸¦æ¥äº†ç©ºé—´ä¸Šçš„æµªè´¹ã€‚
LevelDBæ˜¯è°·æ­Œå¼€æºçš„kvæ•°æ®åº“ï¼Œå®ƒåŸºäºå†…å­˜-ç£ç›˜çš„å­˜å‚¨å±‚æ¬¡ï¼Œå®ç°äº†LSM Treeæœ€åŸºæœ¬çš„åŠŸèƒ½ã€‚ å†…å­˜ä¸­æœ‰memtableï¼Œä½¿ç”¨skiplistæ¥æŒ‰é¡ºåºå­˜å‚¨kvå¯¹ ç£ç›˜ä¸­æœ‰åˆ†å±‚çš„sstableï¼Œä½¿ç”¨sorted-string tableä»¥æ–‡ä»¶çš„å½¢å¼æ¥å­˜å‚¨ã€‚ sstableåŒ…æ‹¬äº†data blockã€index blockã€footer block
å¦‚ä»Šçš„lsm treeé€šå¸¸ä¸ºäº†åŠ å¿«è¯»é€Ÿåº¦ï¼Œå¾€å¾€ä¼šå…·æœ‰bloom filterç»„ä»¶ï¼Œè¯¥ç»„ä»¶æœ‰ä¸¤ä¸ªæ“ä½œï¼šæ’å…¥keyå’Œæ£€æŸ¥keyæ˜¯å¦å­˜åœ¨ã€‚ä¸ºç£ç›˜ä¸­çš„æ¯ä¸€levelï¼Œç»´æŠ¤ä¸€ä¸ªbloom filterï¼Œä»è€Œæé«˜è¯»æ€§èƒ½ã€‚éœ€è¦æ³¨æ„ï¼Œå®ƒæ˜¯false positiveçš„ã€‚ åŒæ—¶å› ä¸ºè¯¥ç»“æ„æ¯”è¾ƒå°ï¼Œå¾€å¾€æŠŠä»–ç¼“å­˜åˆ°å†…å­˜å½“ä¸­ã€‚
å¯¹äºfailure recoveryï¼Œä½¿ç”¨WALä¿è¯å†…å­˜ä¸­memtableçš„recoveryï¼Œä½¿ç”¨manifestä¿è¯mergeè¿‡ç¨‹ä¸­sstableçš„recoveryã€‚
æœ‰ä¸¤ç§å¸¸ç”¨çš„merge policyï¼Œå¦‚ä¸Šå›¾æ‰€ç¤ºã€‚ Leveling merge policyï¼Œè¦æ±‚æ¯ä¸€å±‚çš„SSTableä¹‹é—´ä¸èƒ½overlapï¼Œmergeçš„æ—¶å€™å°†ç¬¬iå±‚çš„SSTableå’Œç¬¬i+1å±‚overlapeçš„æ‰€æœ‰SSTablesè¿›è¡Œmergeï¼Œç„¶åå†™å…¥i+1å±‚ã€‚ä¹Ÿå°±æ˜¯è¯´é€šè¿‡levelingé€šè¿‡é¢‘ç¹çš„mergeï¼Œä½¿å¾—æ¯ä¸€å±‚å…¨éƒ¨æœ‰åºï¼Œç‰ºç‰²éƒ¨åˆ†å†™æ€§èƒ½æ¥æ¢å–è¯»æ€§èƒ½ã€‚
Tiering merge policyï¼Œè¦æ±‚æ¯ä¸€å±‚çš„SSTableä¹‹é—´å¯ä»¥overlapï¼Œåœ¨sstableè¾¾åˆ°ä¸€å®šçš„æ•°é‡æˆ–è€…sizeè¦æ±‚åï¼Œå¯¹è¯¥å±‚æ‰€æœ‰çš„SSTableè¿›è¡Œmerge sortï¼Œç„¶åç›´æ¥flushè¿›ä¸‹ä¸€å±‚ã€‚è¯¥ç­–ç•¥é€šè¿‡å‡å°‘mergeæ“ä½œï¼Œç‰ºç‰²éƒ¨åˆ†è¯»æ€§èƒ½æ¢å–äº†å†™æ€§èƒ½ã€‚
LSM-tree improvement æ–‡ç« å°†å¯¹LSM-treeçš„ä¼˜åŒ–åˆ†ä¸ºä»¥ä¸‹å‡ ä¸ªæ–¹é¢ï¼š
Write Amplification: out-of-placeæ•°æ®ç»“æ„æ‰€å…·æœ‰çš„é—®é¢˜ï¼Œé™ä½äº†å†™æ€§èƒ½å’Œç£ç›˜å¯¿å‘½ã€‚ Merge Operation: mergeåä¼šé€ æˆbuffer cache missï¼Œå¤§æ•°æ®é‡çš„mergeä¼šé€ æˆwrite stall Hardware: é’ˆå¯¹large memory,multi-core, SSD/NVM, native storageçš„ä¼˜åŒ– Special Workloads: Auto-tuning: ä¸å¯èƒ½åŒæ—¶è¾¾åˆ°read,write,spaceåŒæ—¶æœ€ä¼˜ï¼Œå¹¶ä¸”ç”±äºlsm treeæ‹¥æœ‰å¤§é‡å‚æ•°ï¼Œæ‰‹åŠ¨è°ƒä¼˜ä¹Ÿæ˜¯å›°éš¾çš„ã€‚ Secondary Indexing: lsm treeåªæ”¯æŒç®€å•çš„kvæ¥å£ï¼ŒäºŒçº§ç´¢å¼•ä¹Ÿæ˜¯ä¸€ä¸ªæ–¹å‘ã€‚ </p>
</section>
<footer class=entry-footer>8-10&nbsp;Â·&nbsp;yuler</footer>
<a class=entry-link aria-label="post link to LSM-based storage techniques: a survey" href=https://zhangyh.me/posts/paper/aug/suvery-of-lsm/></a>
</article>
<footer class=page-footer>
<nav class=pagination>
<a class=next href=https://zhangyh.me/page/2/>Next Page Â»</a>
</nav>
</footer>
</main>
<footer class=footer>
<span>&copy; 2021 <a href=https://zhangyh.me/>yuler's blog</a></span>
<span>
Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a>
</span>
</footer>
<a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a>
<script>let menu=document.getElementById('menu');menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)},document.querySelectorAll('a[href^="#"]').forEach(a=>{a.addEventListener("click",function(b){b.preventDefault();var a=this.getAttribute("href").substr(1);window.matchMedia('(prefers-reduced-motion: reduce)').matches?document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView({behavior:"smooth"}),a==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${a}`)})})</script>
<script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script>
<script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove('dark'),localStorage.setItem("pref-theme",'light')):(document.body.classList.add('dark'),localStorage.setItem("pref-theme",'dark'))})</script>
</body>
</html>